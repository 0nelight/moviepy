<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>A MoviePy crash-course &mdash; MoviePy 0.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="MoviePy 0.2 documentation" href="../index.html" />
    <link rel="next" title="Gallery" href="../gallery.html" />
    <link rel="prev" title="Download and Installation" href="../install.html" />
   
  <link href="//fonts.googleapis.com/css?family=Open+Sans:400|Antic+Slab" rel="stylesheet" type="text/css">
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body>
  
  

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../gallery.html" title="Gallery"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../install.html" title="Download and Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">MoviePy 0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="a-moviepy-crash-course">
<span id="crashcourse"></span><h1>A MoviePy crash-course<a class="headerlink" href="#a-moviepy-crash-course" title="Permalink to this headline">¶</a></h1>
<p>This section presents the basics of video editing with MoviePy.</p>
<div class="section" id="example-code">
<h2>Example code<a class="headerlink" href="#example-code" title="Permalink to this headline">¶</a></h2>
<p>In a typical MoviePy script, you load some clips from video files, then modify them, put them together, and write the result to a video file. As an example, let us load a movie of my last holidays, lower the volume, add a title in the center of the video for the first ten seconds, and write the result in a file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Import everything needed to edit video clips</span>
<span class="kn">from</span> <span class="nn">moviepy.editor</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Load myHolidays.mp4 and select the subclip 00:00:50 - 00:00:60</span>
<span class="n">clip</span> <span class="o">=</span> <span class="n">VideoFileClip</span><span class="p">(</span><span class="s">&quot;myHolidays.mp4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">subclip</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">60</span><span class="p">)</span>

<span class="c"># Reduce the audio volume (volume x 0.8)</span>
<span class="n">clip</span> <span class="o">=</span> <span class="n">clip</span><span class="o">.</span><span class="n">volumex</span><span class="p">(</span><span class="mf">0.8</span><span class="p">)</span>

<span class="c"># Generate a text clip. You can customize the font, color, etc.</span>
<span class="n">txt_clip</span> <span class="o">=</span> <span class="n">TextClip</span><span class="p">(</span><span class="s">&quot;My Holidays 2013&quot;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;white&#39;</span><span class="p">)</span>

<span class="c"># Say that you want it to appear 10s at the center of the screen</span>
<span class="n">txt_clip</span> <span class="o">=</span> <span class="n">txt_clip</span><span class="o">.</span><span class="n">set_pos</span><span class="p">(</span><span class="s">&#39;center&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set_duration</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="c"># Overlay the text clip on the first video clip</span>
<span class="n">video</span> <span class="o">=</span> <span class="n">CompositeVideoClip</span><span class="p">([</span><span class="n">clip</span><span class="p">,</span> <span class="n">txt_clip</span><span class="p">])</span>

<span class="c"># Write the result to a file</span>
<span class="n">video</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span><span class="s">&quot;myHolidays_edited.avi&quot;</span><span class="p">,</span><span class="n">fps</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span> <span class="n">codec</span><span class="o">=</span><span class="s">&#39;mpeg4&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="what-powers-moviepy">
<h2>What powers MoviePy<a class="headerlink" href="#what-powers-moviepy" title="Permalink to this headline">¶</a></h2>
<p>MoviePy uses the software <tt class="docutils literal"><span class="pre">ffmpeg</span></tt> to read frames from video and audio files. The code to edit and put these frames together relies mainly on the Python library Numpy. The edited frames are assembled in a video file using once again <tt class="docutils literal"><span class="pre">ffmpeg</span></tt>. The software ImageMagick can also be used to generate texts or export an animation in GIF format.</p>
<a class="reference internal image-reference" href="../_images/explanations.jpeg"><img alt="../_images/explanations.jpeg" class="align-center" src="../_images/explanations.jpeg" style="width: 570px;" /></a>
</div>
<div class="section" id="the-clip-objects">
<h2>The clip objects<a class="headerlink" href="#the-clip-objects" title="Permalink to this headline">¶</a></h2>
<p>The most common objects in MoviePy are called clips. A clip (let&#8217;s call it <tt class="docutils literal"><span class="pre">my_clip</span></tt>) can be either an audio clip or a video clip. It has different attributes, like <tt class="docutils literal"><span class="pre">my_clip.duration</span></tt> (indicating its duration in seconds), <tt class="docutils literal"><span class="pre">clip.start</span></tt> (indicating the time in seconds where the clip should start playing when mixed with other videos), <tt class="docutils literal"><span class="pre">my_clip.w</span></tt> (the width in pixel of the clip), etc.</p>
<p>A video clip <tt class="docutils literal"><span class="pre">my_clip</span></tt> can have two special attributes which are themselves clips: <tt class="docutils literal"><span class="pre">my_clip.audio</span></tt> is an audio clip representing the audio track of the vidceo clip. <tt class="docutils literal"><span class="pre">my_clip.mask</span></tt> is a special kind of video clip which defines the transparency of <tt class="docutils literal"><span class="pre">my_clip</span></tt>.</p>
<p>A clip also has methods which enable to create a derivative of this clip. For instance <tt class="docutils literal"><span class="pre">my_clip.subclip(2,7)</span></tt> creates a new clip which is like <tt class="docutils literal"><span class="pre">my_clip</span></tt> cut between seconds 2 and 7.</p>
</div>
<div class="section" id="classes-of-video-clips">
<h2>Classes of video clips<a class="headerlink" href="#classes-of-video-clips" title="Permalink to this headline">¶</a></h2>
<p>Video clips are the building blocks of longer videos. They can be created with one of the following:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">VideoFileClip('myHolidays.mp4')</span></tt> will generate a clip from a video file. This video file can have any format or extension : mp4, flv, mov, ... even gif !</li>
<li><tt class="docutils literal"><span class="pre">ImageClip('myPicture.png')</span></tt> will generate a clip displaying a picture, for an <em>a priori</em> infinite duration.</li>
<li><tt class="docutils literal"><span class="pre">ColorClip((height,width),color=(R,G,B))</span></tt> generates a special ImageClip of a single color.</li>
<li><tt class="docutils literal"><span class="pre">TextClip('Hello</span> <span class="pre">folks</span> <span class="pre">!',font='Impact-Regular')</span></tt> generates a special ImageClip representing a text. The generation of the text image is made by the software ImageMagick (see the Installation section).</li>
</ul>
<p>To that list we should add the <tt class="docutils literal"><span class="pre">CompositeVideoClips</span></tt> which are obtained by putting several clips together.</p>
</div>
<div class="section" id="composite-video-clips">
<span id="compositevideoclips"></span><h2>Composite video clips<a class="headerlink" href="#composite-video-clips" title="Permalink to this headline">¶</a></h2>
<p>Composite video clips are video clips which will display the contents of several other video clips. The simplest compositing is concatenation with <tt class="xref py py-meth docutils literal"><span class="pre">concatenate()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">video</span> <span class="o">=</span> <span class="n">concatenate</span><span class="p">([</span><span class="n">clip1</span><span class="p">,</span><span class="n">clip2</span><span class="p">,</span><span class="n">clip3</span><span class="p">])</span>
</pre></div>
</div>
<p>Now <tt class="docutils literal"><span class="pre">video</span></tt> is a clip that plays the clips 1, 2, and 3 one after the other. You can also play a transition clip between the clips with the option <tt class="docutils literal"><span class="pre">transition=my_clip</span></tt>.</p>
<p>Next, you have the <cite>~moviepy.video.compositing.CompositeVideoClip.CompositeVideoClip</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">video</span> <span class="o">=</span> <span class="n">CompositeVideoClip</span><span class="p">([</span><span class="n">clip1</span><span class="p">,</span><span class="n">clip2</span><span class="p">,</span><span class="n">clip3</span><span class="p">])</span>
</pre></div>
</div>
<p>Now <tt class="docutils literal"><span class="pre">video</span></tt> plays <tt class="docutils literal"><span class="pre">clip1</span></tt>, and <tt class="docutils literal"><span class="pre">clip2</span></tt> <em>on top of</em> <tt class="docutils literal"><span class="pre">clip1</span></tt>, and <tt class="docutils literal"><span class="pre">clip3</span></tt> on top of <tt class="docutils literal"><span class="pre">clip1</span></tt>, and <tt class="docutils literal"><span class="pre">clip2</span></tt>. For instance, if <tt class="docutils literal"><span class="pre">clip2</span></tt> and <tt class="docutils literal"><span class="pre">clip3</span></tt> have the same size as <tt class="docutils literal"><span class="pre">clip1</span></tt>, then only <tt class="docutils literal"><span class="pre">clip3</span></tt>, which is on top, will be visible in the video... unless  <tt class="docutils literal"><span class="pre">clip3</span></tt> and <tt class="docutils literal"><span class="pre">clip2</span></tt> have masks which hide parts of them. Note that by default the composition has the size of its first clip (as it is generally a <em>background</em>). But sometimes you will want to make your clips <em>float</em> in a bigger composition, so you will specify the size of the final composition as follows</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">video</span> <span class="o">=</span> <span class="n">CompositeVideoClip</span><span class="p">([</span><span class="n">clip1</span><span class="p">,</span><span class="n">clip2</span><span class="p">,</span><span class="n">clip3</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">720</span><span class="p">,</span><span class="mi">460</span><span class="p">))</span>
</pre></div>
</div>
<p>In a CompositionClip, all the clips start to play at a time that is specified by the <tt class="docutils literal"><span class="pre">clip.start</span></tt> attribute. You can set this starting time as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">clip1</span> <span class="o">=</span> <span class="n">clip1</span><span class="o">.</span><span class="n">set_start</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c"># start after 5 seconds</span>
</pre></div>
</div>
<p>So for instance your composition will look like</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">video</span> <span class="o">=</span> <span class="n">CompositeVideoClip</span><span class="p">([</span><span class="n">clip1</span><span class="p">,</span> <span class="c"># starts at t=0</span>
                            <span class="n">clip2</span><span class="o">.</span><span class="n">set_start</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="c"># start at t=5s</span>
                            <span class="n">clip3</span><span class="o">.</span><span class="n">set_start</span><span class="p">(</span><span class="mi">9</span><span class="p">)])</span> <span class="c"># start at t=9s</span>
</pre></div>
</div>
<p>In the example above, maybe <tt class="docutils literal"><span class="pre">clip2</span></tt> will start before <tt class="docutils literal"><span class="pre">clip1</span></tt> is over. In this case you can make <tt class="docutils literal"><span class="pre">clip2</span></tt> appear with a <em>fade-in</em> effect of one second:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">video</span> <span class="o">=</span> <span class="n">CompositeVideoClip</span><span class="p">([</span><span class="n">clip1</span><span class="p">,</span> <span class="c"># starts at t=0</span>
                            <span class="n">clip2</span><span class="o">.</span><span class="n">set_start</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">fadein</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                            <span class="n">clip3</span><span class="o">.</span><span class="n">set_start</span><span class="p">(</span><span class="mi">9</span><span class="p">)])</span>
</pre></div>
</div>
<p>Finally, if <tt class="docutils literal"><span class="pre">clip2</span></tt> and <tt class="docutils literal"><span class="pre">clip3</span></tt> are smaller than <tt class="docutils literal"><span class="pre">clip1</span></tt>, you can decide where they will appear in the composition by setting their position. Here we indicate the coordinates of the top-left pixel:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">video</span> <span class="o">=</span> <span class="n">CompositeVideoClip</span><span class="p">([</span><span class="n">clip1</span><span class="p">,</span>
                           <span class="n">clip2</span><span class="o">.</span><span class="n">set_pos</span><span class="p">((</span><span class="mi">45</span><span class="p">,</span><span class="mi">150</span><span class="p">)),</span>
                           <span class="n">clip3</span><span class="o">.</span><span class="n">set_pos</span><span class="p">((</span><span class="mi">90</span><span class="p">,</span><span class="mi">100</span><span class="p">))])</span>
</pre></div>
</div>
<p>Note that there are many ways to specify the position:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">clip2</span><span class="o">.</span><span class="n">set_pos</span><span class="p">((</span><span class="mi">45</span><span class="p">,</span><span class="mi">150</span><span class="p">))</span> <span class="c"># x=45, y=150 , in pixels</span>

<span class="n">clip2</span><span class="o">.</span><span class="n">set_pos</span><span class="p">(</span><span class="s">&quot;center&quot;</span><span class="p">)</span> <span class="c"># automatically centered</span>

<span class="c"># clip2 is horizontally centered, and at the top of the picture</span>
<span class="n">clip2</span><span class="o">.</span><span class="n">set_pos</span><span class="p">((</span><span class="s">&quot;center&quot;</span><span class="p">,</span><span class="s">&quot;top&quot;</span><span class="p">))</span>

<span class="c"># clip2 is vertically centered, at the left of the picture</span>
<span class="n">clip2</span><span class="o">.</span><span class="n">set_pos</span><span class="p">((</span><span class="s">&quot;left&quot;</span><span class="p">,</span><span class="s">&quot;center&quot;</span><span class="p">))</span>

<span class="c"># clip2 is at 40% of the width, 70% of the height of the screen:</span>
<span class="n">clip2</span><span class="o">.</span><span class="n">set_pos</span><span class="p">((</span><span class="mf">0.4</span><span class="p">,</span><span class="mf">0.7</span><span class="p">),</span> <span class="n">relative</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># clip2&#39;s position is horizontally centered, and moving down !</span>
<span class="n">clip2</span><span class="o">.</span><span class="n">set_pos</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="o">+</span><span class="n">t</span><span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
<p>When indicating the position keep in mind that the <tt class="docutils literal"><span class="pre">y</span></tt> coordinate has its zero at the top of the picture:</p>
<div class="figure">
<img alt="../_images/videoWH.jpeg" src="../_images/videoWH.jpeg" />
</div>
</div>
<div class="section" id="wrting-a-video-clip-to-a-file">
<span id="renderingaclip"></span><h2>Wrting a video clip to a file<a class="headerlink" href="#wrting-a-video-clip-to-a-file" title="Permalink to this headline">¶</a></h2>
<p>To write a clip as a video file, use</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">my_clip</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span><span class="s">&quot;movie.mp4&quot;</span><span class="p">)</span> <span class="c"># default: &#39;libx264&#39;, 24 fps</span>
<span class="n">my_clip</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span><span class="s">&quot;movie.mp4&quot;</span><span class="p">,</span><span class="n">fps</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">codec</span><span class="o">=</span><span class="s">&#39;mpeg4&#39;</span><span class="p">)</span>
<span class="n">my_clip</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span><span class="s">&quot;movie.mp4&quot;</span><span class="p">,</span><span class="n">audio</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="c"># don&#39;t render audio.</span>
</pre></div>
</div>
<p>You can also use other codecs to write <tt class="docutils literal"><span class="pre">.webm</span></tt> or <tt class="docutils literal"><span class="pre">.ogv</span></tt> files.</p>
<p>Sometimes it is impossible for MoviePy to guess the <tt class="docutils literal"><span class="pre">duration</span></tt> attribute of the clip (keep in mind that some clips, like ImageClips displaying a picture, have <em>a priori</em> an infinite duration). Then, the <tt class="docutils literal"><span class="pre">duration</span></tt> must be set manually with <tt class="docutils literal"><span class="pre">clip.set_duration</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Make a video showing a flower for 5 seconds</span>
<span class="n">my_clip</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s">&quot;flower.jpeg&quot;</span><span class="p">)</span> <span class="c"># has infinite duration</span>
<span class="n">my_clip</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span><span class="s">&quot;flower.mp4&quot;</span><span class="p">)</span> <span class="c"># Will fail ! NO DURATION !</span>
<span class="n">my_clip</span><span class="o">.</span><span class="n">set_duration</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span><span class="s">&quot;flower.mp4&quot;</span><span class="p">)</span> <span class="c"># works !</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-an-animated-gif">
<h2>Writing an animated GIF<a class="headerlink" href="#writing-an-animated-gif" title="Permalink to this headline">¶</a></h2>
<p>To write your video as an animated GIF, use</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">my_clip</span><span class="o">.</span><span class="n">write_gif</span><span class="p">(</span><span class="s">&#39;test.gif&#39;</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>If your computer has enough RAM (say, at least 2GB), you can use its faster version</p>
<blockquote>
<div>my_clip.write_gif(&#8216;test.gif&#8217;, fps=12)</div></blockquote>
<p>See <a class="reference external" href="http://zulko.github.io/blog/2014/01/23/making-animated-gifs-from-video-files-with-python">this blog post</a> for more informations on making GIFs with MoviePy.</p>
</div>
<div class="section" id="previewing-a-video-clip">
<h2>Previewing a video clip<a class="headerlink" href="#previewing-a-video-clip" title="Permalink to this headline">¶</a></h2>
<p>A clip previewed, i.e. generated and displayed at the same time, which is faster than re-generating the file and opening it every time you change your script. Previewing requires to have the Python package PyGame installed, and will only work if PyGame is initialized, which will be the case
if you started with <tt class="docutils literal"><span class="pre">from</span> <span class="pre">moviepy</span> <span class="pre">import</span> <span class="pre">*</span></tt>.</p>
<p>To preview just one frame of the clip, use one of these:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">my_clip</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c"># shows the first frame of the clip</span>
<span class="n">my_clip</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mf">10.5</span><span class="p">)</span> <span class="c"># shows the frame of the clip at t=10.5s</span>
<span class="n">my_clip</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">interactive</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The last line allows you to click anywhere on the clip and get the position and color of the pixel on which you clicked (press Escape to terminate).</p>
<p>To preview the clip, you must specify the frames-per-second</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">my_clip</span><span class="o">.</span><span class="n">preview</span><span class="p">()</span> <span class="c"># preview with default fps=15</span>
<span class="n">my_clip</span><span class="o">.</span><span class="n">preview</span><span class="p">(</span><span class="n">fps</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">my_clip</span><span class="o">.</span><span class="n">preview</span><span class="p">(</span><span class="n">fps</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">audio</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="c"># don&#39;t play sound.</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">fps</span></tt> can be any number, independently of the <tt class="docutils literal"><span class="pre">fps</span></tt> of your different sources.</p>
<p>While the clip is getting prewieved, just can just click anywhere on the clip to get the time, position and color of the pixel you clicked.</p>
</div>
<div class="section" id="audio-clips">
<span id="ccaudioclips"></span><h2>Audio clips<a class="headerlink" href="#audio-clips" title="Permalink to this headline">¶</a></h2>
<p>The second important objects of MoviePy are the audio clips. If <tt class="docutils literal"><span class="pre">myHolidays.mp4</span></tt> is a video with sound, then</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">clip</span> <span class="o">=</span> <span class="n">VideoFileClip</span><span class="p">(</span><span class="s">&#39;myHolidays.mp4&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>will create a clip with a <tt class="docutils literal"><span class="pre">clip.audio</span></tt> attribute which is an audio clip. This is the sound that you will hear if you render the clip with <tt class="docutils literal"><span class="pre">clip.preview</span></tt> or <tt class="docutils literal"><span class="pre">clip.write_videofile</span></tt>. You can also create an audio clip from a sound file and then attach it to a video clip:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">audio</span> <span class="o">=</span> <span class="n">AudioFileClip</span><span class="p">(</span><span class="s">&#39;mySong.wav&#39;</span><span class="p">)</span>
<span class="n">video</span> <span class="o">=</span> <span class="n">VideoFileClip</span><span class="p">(</span><span class="s">&#39;myHolidays.mp4&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set_audio</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>
</pre></div>
</div>
<p>Like video clips, audio clips can be cut (with <tt class="docutils literal"><span class="pre">clip.subclip</span></tt>) modified (with for instance <tt class="docutils literal"><span class="pre">clip.volumex</span></tt> which multiplies the volume) and combined (with <tt class="docutils literal"><span class="pre">CompositeAudioClip</span></tt>). But most of the time, MoviePy will do that for you:</p>
<ul class="simple">
<li>When you cut a video clip with <tt class="docutils literal"><span class="pre">videoclip.subclip(20,25)</span></tt> then the sound will also be cut, i.e. the resulting clip will have an audio clip <tt class="docutils literal"><span class="pre">videoclip.audio.subclip(20,25)</span></tt>.</li>
<li>When you put several clips together in a CompositeVideoClip, then the sound of the CompositeVideoClip will be the composition of the sounds of the different video clips.</li>
</ul>
<p>For an example, you can refer to <em class="xref std std-ref">soundexample</em>. Like video clips, sound clips have a <tt class="docutils literal"><span class="pre">get_frame</span></tt> attribute, and creating new audio clips by modifying or putting together other audio clips does not eat the memory. The actual sounds of the audio clips are only computed when we ask to play them or to write them to a file. You can do that as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">audioclip</span><span class="o">.</span><span class="n">preview</span><span class="p">()</span> <span class="c"># default fps: 22050</span>
<span class="n">audioclip</span><span class="o">.</span><span class="n">preview</span><span class="p">(</span><span class="n">fps</span><span class="o">=</span><span class="mi">44100</span><span class="p">)</span>
<span class="n">audioclip</span><span class="o">.</span><span class="n">to_audiofile</span><span class="p">(</span><span class="s">&#39;my_clip.mp3&#39;</span><span class="p">,</span><span class="n">fps</span><span class="o">=</span><span class="mi">44100</span><span class="p">)</span> <span class="c">#default fps: 22050</span>
</pre></div>
</div>
</div>
<div class="section" id="operations-on-a-clip">
<h2>Operations on a clip<a class="headerlink" href="#operations-on-a-clip" title="Permalink to this headline">¶</a></h2>
<p>There are several categories of clip modifications in MoviePy.</p>
<p>The very common methods for composition (cutting a clip, setting its position, etc.) are implemented as <tt class="docutils literal"><span class="pre">clip.mymethod</span></tt>. For instance <tt class="docutils literal"><span class="pre">clip.subclip(15,20)</span></tt> returns the part of <tt class="docutils literal"><span class="pre">clip</span></tt> that is playing between 15 seconds and 20 seconds.</p>
<p>For all the other modifications, we use <tt class="docutils literal"><span class="pre">clip.fx</span></tt> and <tt class="docutils literal"><span class="pre">clip.fl</span></tt>. <tt class="docutils literal"><span class="pre">clip.fx</span></tt> is meant to make it easy to use already-written transformation functions, while  <tt class="docutils literal"><span class="pre">clip.fl</span></tt> makes it easy to write new transformation functions.</p>
<p>Note that none of these methods occur <em>inplace</em>: they all create a copy of the clip and let the original clip untouched. Moreover, modified clips are just <em>special views</em> of the original clip, they do not carry all the video data with them. Actually, the <em>real</em> modifications are only performed when you are rendering the clip (see <a class="reference internal" href="#renderingaclip"><em>Wrting a video clip to a file</em></a>). This means that all the clip objects that you will create through modifications of other clips take virtually no place in the memory and are created quasi-instantly.</p>
<div class="section" id="clip-fx">
<h3>clip.fx<a class="headerlink" href="#clip-fx" title="Permalink to this headline">¶</a></h3>
<p>Suppose that you have some functions implementing effects on clips:</p>
<div class="highlight-python"><pre>effect_1(clip, args1) -&gt; new clip
effect_2(clip, args2) -&gt; new clip
effect_3(clip, args3) -&gt; new clip</pre>
</div>
<p>where <tt class="docutils literal"><span class="pre">args</span></tt> represent arguments and/or keyword arguments. To apply these functions, in that order, to one clip, you would write something like</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">newclip</span> <span class="o">=</span>  <span class="n">effect_3</span><span class="p">(</span> <span class="n">effect_2</span><span class="p">(</span> <span class="n">effect_1</span><span class="p">(</span><span class="n">clip</span><span class="p">,</span> <span class="n">args3</span><span class="p">),</span> <span class="n">args2</span><span class="p">),</span> <span class="n">args1</span><span class="p">)</span>
</pre></div>
</div>
<p>but this is not easy to read. To have a clearer syntax you can use <tt class="docutils literal"><span class="pre">clip.fx</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">newclip</span> <span class="o">=</span> <span class="p">(</span><span class="n">clip</span><span class="o">.</span><span class="n">fx</span><span class="p">(</span> <span class="n">effect_1</span><span class="p">,</span> <span class="n">args1</span><span class="p">)</span>
               <span class="o">.</span><span class="n">fx</span><span class="p">(</span> <span class="n">effect_2</span><span class="p">,</span> <span class="n">args2</span><span class="p">)</span>
               <span class="o">.</span><span class="n">fx</span><span class="p">(</span> <span class="n">effect_3</span><span class="p">,</span> <span class="n">args3</span><span class="p">))</span>
</pre></div>
</div>
<p>Much better ! There are already many effects implemented in the modules <tt class="docutils literal"><span class="pre">moviepy.video.fx</span></tt> and <tt class="docutils literal"><span class="pre">moviepy.audio.fx</span></tt>. The fx methods in these modules are automatically applied to the sound and the mask of the clip if it is relevant, so that you don&#8217;t have to worry about modifying these. For practicality, when you use <tt class="docutils literal"><span class="pre">from</span> <span class="pre">moviepy</span> <span class="pre">import.editor</span> <span class="pre">*</span></tt>, these two modules are loaded as <tt class="docutils literal"><span class="pre">vfx</span></tt> and <tt class="docutils literal"><span class="pre">afx</span></tt>, so you may write something like</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">moviepy.editor</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">clip</span> <span class="o">=</span> <span class="p">(</span><span class="n">VideoFileClip</span><span class="p">(</span><span class="s">&quot;myvideo.avi&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">fx</span><span class="p">(</span> <span class="n">vfx</span><span class="o">.</span><span class="n">resize</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">460</span><span class="p">)</span> <span class="c"># resize (keep aspect ratio)</span>
        <span class="o">.</span><span class="n">fx</span><span class="p">(</span> <span class="n">vfx</span><span class="o">.</span><span class="n">speedx</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c"># double speed</span>
        <span class="o">.</span><span class="n">fx</span><span class="p">(</span> <span class="n">vfx</span><span class="o">.</span><span class="n">colorx</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span> <span class="c"># darken the picture</span>
</pre></div>
</div>
<p>For convenience, when you use <tt class="docutils literal"><span class="pre">moviepy.editor</span></tt>, frequently used methods such as <tt class="docutils literal"><span class="pre">resize</span></tt> can be called in a simpler way: <tt class="docutils literal"><span class="pre">clip.resize(...)</span></tt> instead of <tt class="docutils literal"><span class="pre">clip.fx(</span> <span class="pre">vfx.resize,</span> <span class="pre">...)</span></tt></p>
</div>
<div class="section" id="clip-fl">
<h3>clip.fl<a class="headerlink" href="#clip-fl" title="Permalink to this headline">¶</a></h3>
<p>You can modify a clip as you want using custom <em>filters</em> with <tt class="docutils literal"><span class="pre">clip.fl_time</span></tt>, <tt class="docutils literal"><span class="pre">clip.fl_image</span></tt>, and more generally with <tt class="docutils literal"><span class="pre">clip.fl</span></tt>.</p>
<p>You can change the timeline of the clip with <tt class="docutils literal"><span class="pre">clip.fl_time</span></tt> like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">modifiedClip1</span> <span class="o">=</span> <span class="n">my_clip</span><span class="o">.</span><span class="n">fl_time</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="mi">3</span><span class="o">*</span><span class="n">t</span><span class="p">)</span>
<span class="n">modifiedClip2</span> <span class="o">=</span> <span class="n">my_clip</span><span class="o">.</span><span class="n">fl_time</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="mi">1</span><span class="o">+</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</pre></div>
</div>
<p>Now the clip <tt class="docutils literal"><span class="pre">modifiedClip1</span></tt> plays the same as <tt class="docutils literal"><span class="pre">my_clip</span></tt>, only three times faster, while <tt class="docutils literal"><span class="pre">modifiedClip2</span></tt> will play <tt class="docutils literal"><span class="pre">my_clip</span></tt> by oscillating between the times t=0s and t=2s. Note that in the last case you have created a clip of infinite duration (which is not a problem for the moment).</p>
<p>You can also modify the display of a clip with <tt class="docutils literal"><span class="pre">clip.fl_image</span></tt>. The following takes a clip and inverts the green and blue channels of the frames:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">invert_green_blue</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">image</span><span class="p">[:,:,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]]</span>

<span class="n">modifiedClip</span> <span class="o">=</span> <span class="n">my_clip</span><span class="o">.</span><span class="n">fl_image</span><span class="p">(</span> <span class="n">invert_green_blue</span> <span class="p">)</span>
</pre></div>
</div>
<p>Finally, you may want to process the clip by taking into account both the time and the frame picture. This is possible with the method <tt class="docutils literal"><span class="pre">clip.fl(filter)</span></tt>. The filter must be a function which takes two arguments and returns a picture. the fist argument is a <tt class="docutils literal"><span class="pre">get_frame</span></tt> method (i.e. a function <tt class="docutils literal"><span class="pre">g(t)</span></tt> which given a time returns the clip&#8217;s frame at that time), and the second argument is the time.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">scroll</span><span class="p">(</span><span class="n">get_frame</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function returns a &#39;region&#39; of the current frame.</span>
<span class="sd">    The position of this region depends on the time.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">get_frame</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="n">frame_region</span> <span class="o">=</span> <span class="n">frame</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">t</span><span class="p">):</span><span class="nb">int</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">+</span><span class="mi">360</span><span class="p">,:]</span>
    <span class="k">return</span> <span class="n">frame_region</span>

<span class="n">modifiedClip</span> <span class="o">=</span> <span class="n">my_clip</span><span class="o">.</span><span class="n">fl</span><span class="p">(</span> <span class="n">scroll</span> <span class="p">)</span>
</pre></div>
</div>
<p>This will scroll down the clip, with a constant height of 360 pixels.</p>
<p>When programming a new effect, whenever it is possible, prefer using <tt class="docutils literal"><span class="pre">fl_time</span></tt> and
<tt class="docutils literal"><span class="pre">fl_image</span></tt> instead of <tt class="docutils literal"><span class="pre">fl</span></tt> if possible when implementing
new effects. The reason is that, when these effects are applied to
ImageClips, MoviePy will recognize that these methods do not need to be applied to each frame, which will
result in faster renderings.</p>
</div>
</div>
<div class="section" id="to-go-further">
<h2>To go further<a class="headerlink" href="#to-go-further" title="Permalink to this headline">¶</a></h2>
<p>The best way to start with moviepy is to use it with the IPython Notebook, as it has autocompletion which will help you find all you need and discover all the available methods.</p>
<p>Advanced features of MoviePy that cannot be expressed as an <tt class="docutils literal"><span class="pre">fx</span></tt> are placed in <a href="#id1"><span class="problematic" id="id2">:module:`moviepy.video.tools`</span></a> (currently this module contains methods for tracking objects, segmenting, drawing, making credits, dealing with subtitles) and <cite>moviepy.audio.tools</cite> (currently empty, will contain denoisers and utilities for synchronization).</p>
<p>To go further and learn about all the available options and
functionalities of MoviePy, see the <a class="reference internal" href="../examples/examples.html#examples"><em>Example Scripts</em></a> and the <a class="reference internal" href="../ref/ref.html#reference-manual"><em>Reference Manual</em></a>.
You can also browse the code of the different video effects in
<tt class="docutils literal"><span class="pre">moviepy/video/fx</span></tt> to give you ideas on how to code your own effects.</p>
</div>
</div>


          </div>
        </div>
      </div>
     
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo_small.jpeg" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">A MoviePy crash-course</a><ul>
<li><a class="reference internal" href="#example-code">Example code</a></li>
<li><a class="reference internal" href="#what-powers-moviepy">What powers MoviePy</a></li>
<li><a class="reference internal" href="#the-clip-objects">The clip objects</a></li>
<li><a class="reference internal" href="#classes-of-video-clips">Classes of video clips</a></li>
<li><a class="reference internal" href="#composite-video-clips">Composite video clips</a></li>
<li><a class="reference internal" href="#wrting-a-video-clip-to-a-file">Wrting a video clip to a file</a></li>
<li><a class="reference internal" href="#writing-an-animated-gif">Writing an animated GIF</a></li>
<li><a class="reference internal" href="#previewing-a-video-clip">Previewing a video clip</a></li>
<li><a class="reference internal" href="#audio-clips">Audio clips</a></li>
<li><a class="reference internal" href="#operations-on-a-clip">Operations on a clip</a><ul>
<li><a class="reference internal" href="#clip-fx">clip.fx</a></li>
<li><a class="reference internal" href="#clip-fl">clip.fl</a></li>
</ul>
</li>
<li><a class="reference internal" href="#to-go-further">To go further</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../install.html" title="previous chapter">Download and Installation</a></li>
      <li>Next: <a href="../gallery.html" title="next chapter">Gallery</a></li>
  </ul></li>
</ul>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/crash_course/crash_course.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
    
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../gallery.html" title="Gallery"
             >next</a> |</li>
        <li class="right" >
          <a href="../install.html" title="Download and Installation"
             >previous</a> |</li>
        <li><a href="../index.html">MoviePy 0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" style="position:relative">
      &copy; Copyright 2014, Zulko.
    </div>
    <div>

    </div>

  </body>
</html>