<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Video clips : an overview &mdash; MoviePy 0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="MoviePy 0.1 documentation" href="../index.html" />
    <link rel="up" title="First steps with MoviePy" href="../first_steps.html" />
    <link rel="next" title="Sound clips" href="sound_overview.html" />
    <link rel="prev" title="Example code" href="example_code.html" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="../_static/small_flask.css" type= "text/css" rel="stylesheet" />

  </head>
  <body>
  
  

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="sound_overview.html" title="Sound clips"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="example_code.html" title="Example code"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">MoviePy 0.1 documentation</a> &raquo;</li>
          <li><a href="../first_steps.html" accesskey="U">First steps with MoviePy</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="video-clips-an-overview">
<h1>Video clips : an overview<a class="headerlink" href="#video-clips-an-overview" title="Permalink to this headline">¶</a></h1>
<p>A video clip in its simplest form is just an object with a <tt class="docutils literal"><span class="pre">get_frame</span></tt> attribute. <tt class="docutils literal"><span class="pre">get_frame</span></tt> is a function which for a given time <tt class="docutils literal"><span class="pre">t</span></tt> returns a picture of the clip at time <tt class="docutils literal"><span class="pre">t</span></tt> (more precisely, an array of numbers representing a picture). As an example, to play a clip frame by frame, you can (but you won&#8217;t have to) write something like that:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">while</span> <span class="n">t</span><span class="o">&lt;</span> <span class="n">clip</span><span class="o">.</span><span class="n">duration</span><span class="p">:</span>
    <span class="n">display</span><span class="p">(</span> <span class="n">clip</span><span class="o">.</span><span class="n">get_frame</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="mf">1.0</span><span class="o">/</span><span class="mi">24</span> <span class="c"># for 24 frames/second</span>
</pre></div>
</div>
<p>A clip has some fundamental attributes:</p>
<ul class="simple">
<li><strong>The size</strong> (width,height), <tt class="docutils literal"><span class="pre">clip.size</span></tt>, indicates the dimensions in pixels of the clip.</li>
<li><strong>The duration</strong>, <tt class="docutils literal"><span class="pre">clip.duration</span></tt>, is the time after which the clip   stops playing</li>
<li><strong>The soundtrack</strong>,  <tt class="docutils literal"><span class="pre">clip.sound</span></tt>, which contains the sound data (an array actually) of the clip.</li>
</ul>
<p>When you mix several clips together (see <a class="reference internal" href="#composite-video-clips">Composite video clips</a>), you may have to worry about some other attributes:</p>
<ul class="simple">
<li><strong>The position</strong> indicates where the clip will appear if you display it as part of a bigger screen.</li>
<li><strong>The mask</strong>, <tt class="docutils literal"><span class="pre">clip.mask</span></tt>, is an array of numbers  between 0 and 1, a 0 at some position meaning that the pixel at the same position in the picture should not be displayed. If you are not going to do anything complicated, you shouldn&#8217;t worry about the mask (by default, all video clips have a mask with only ones, meaning that the picture should be completely visible). Just know that  <tt class="docutils literal"><span class="pre">clip.mask</span></tt> is actually... a clip ! More precisely, its method <tt class="docutils literal"><span class="pre">clip.mask.get_frame</span></tt> returns, for a given time, the mask that should be used when blitting the clip&#8217;s frame over another picture.</li>
</ul>
<div class="section" id="classes-of-video-clips">
<h2>Classes of video clips<a class="headerlink" href="#classes-of-video-clips" title="Permalink to this headline">¶</a></h2>
<p>A video clip can be created using one of the following commands:</p>
<ul class="simple">
<li><strong>MovieClips</strong> created with <tt class="docutils literal"><span class="pre">MovieClip('myHolidays.mp4')</span></tt> are clips read from a movie file.</li>
<li><strong>Image clips</strong> created with <tt class="docutils literal"><span class="pre">ImageClip('myPic.png')</span></tt> are clips displaying a picture, for an <em>a priori</em> infinite duration.</li>
<li><strong>Color clips</strong> created with <tt class="docutils literal"><span class="pre">ColorClip((height,width),color=(R,G,B))</span></tt> are special ImageClips of a single color.</li>
<li><strong>Text clips</strong> created with <tt class="docutils literal"><span class="pre">TextClip('Hello</span> <span class="pre">public',font='Impact-Regular')</span></tt> are special ImageClips representing a text. They are automatically generated using ImageMagick.</li>
</ul>
<p>To that list we should add the <tt class="docutils literal"><span class="pre">CompositeVideoClips</span></tt> that are obtained by mixing several clips together (see <a class="reference internal" href="#composite-video-clips">Composite video clips</a>).</p>
<p>Finally, a clip can be of the base class VideoClip, and have a very custom <tt class="docutils literal"><span class="pre">get_frame</span></tt> method. For instance the following clip represents a 320x460
screen (caution: 320 is the height), that will go from black (color [1,1,1])
to white (color [255,255,255]) in 255 seconds.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">moviepy</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">dark_picture</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">320</span><span class="p">,</span><span class="mi">460</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">custom_get_frame</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">t</span><span class="p">),</span><span class="mi">255</span><span class="p">)</span> <span class="o">*</span> <span class="n">dark_picture</span>
<span class="n">clip</span> <span class="o">=</span> <span class="n">VideoClip</span><span class="p">()</span><span class="o">.</span><span class="n">set_get_frame</span><span class="p">(</span><span class="n">custom_get_frame</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="modifying-a-clip">
<h2>Modifying a clip<a class="headerlink" href="#modifying-a-clip" title="Permalink to this headline">¶</a></h2>
<p>You will find many pre-implemented methods to modify a clip  ( see <tt class="xref py py-class docutils literal"><span class="pre">VideoClip</span></tt>). For instance <tt class="docutils literal"><span class="pre">clip.subclip(15,20)</span></tt> returns the part of <tt class="docutils literal"><span class="pre">clip</span></tt> that is between 20 seconds and 50 seconds, <tt class="docutils literal"><span class="pre">clip.resize((heigth,width))</span></tt> will change the resolution of the clip, while <tt class="docutils literal"><span class="pre">clip.crop</span></tt> will enable you to keep only a region of the clip and <tt class="docutils literal"><span class="pre">clip.speedx(0.5)</span></tt> will make your clip play two times slower. When it is relevant, these methods are also applied to the sound and the mask of the clip, so that you don&#8217;t have to worry about modifying these.</p>
<p>The current policy is that <strong>no modification of a clip occurs inplace</strong>, which means that when you modify some clip, the result will be a new clip and the original clip will be untouched.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">clip</span> <span class="o">=</span> <span class="n">MovieClip</span><span class="p">(</span><span class="s">&#39;myHolidays&#39;</span><span class="p">)</span>
<span class="n">clip</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">320</span><span class="p">,</span><span class="mi">460</span><span class="p">))</span> <span class="c"># clip is NOT modified</span>
<span class="n">clip</span> <span class="o">=</span> <span class="n">clip</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">320</span><span class="p">,</span><span class="mi">460</span><span class="p">))</span> <span class="c"># clip is modified</span>
</pre></div>
</div>
<p>Another important aspect is that modified clips are just <em>special views</em> of the original clip, they do not carry all the video data with them. Actually, the <em>real</em> modifications are only performed when you are rendering the clip (see <a class="reference internal" href="#rendering-a-clip">Rendering a clip</a>). The good news is, all the clip objects that you will create through modifications of other clips take virtually no place in the memory and are created instantly.</p>
<p>Apart from the pre-implemented modifications, you can modify a clip as you want using filters. You can change the timeline of the clip like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">modifiedClip1</span> <span class="o">=</span> <span class="n">myClip</span><span class="o">.</span><span class="n">fl_time</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="mi">3</span><span class="o">*</span><span class="n">t</span><span class="p">)</span>
<span class="n">modifiedClip2</span> <span class="o">=</span> <span class="n">myClip</span><span class="o">.</span><span class="n">fl_time</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="mi">1</span><span class="o">+</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</pre></div>
</div>
<p>Now the clip <tt class="docutils literal"><span class="pre">modifiedClip1</span></tt> plays the same as <tt class="docutils literal"><span class="pre">myClip</span></tt>, only two times faster, while <tt class="docutils literal"><span class="pre">modifiedClip2</span></tt> will play <cite>myClip`</cite> by oscillating between the times t=0s and t=2s. Note that in the last case you have created a clip of infinite duration (which is not a problem).</p>
<dl class="docutils">
<dt>You can also modify the display of a clip. The following takes a clip and inverts the green and blue channels: ::</dt>
<dd>modified clip1 = myClip.fl_image(lambda im: im[:,:,[0,2,1]])</dd>
</dl>
<p>Finally, you may want to process both The filter must be a function which takes two arguments and returns a picture. the fist argument is a <tt class="docutils literal"><span class="pre">get_frame</span></tt> method (i.e. a function which given a time returns a picture), and the second argument is the time.</p>
<div class="highlight-python"><pre>modifiedClip = myClip.fl(lambda gf,t: np.minimum(int(t),gf(2*t))</pre>
</div>
<p>This one is a little complicated to grasp.</p>
</div>
<div class="section" id="composite-video-clips">
<h2>Composite video clips<a class="headerlink" href="#composite-video-clips" title="Permalink to this headline">¶</a></h2>
<p>The simplest compositing is concatenation with <tt class="xref py py-meth docutils literal"><span class="pre">concat()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">video</span> <span class="o">=</span> <span class="n">concat</span><span class="p">([</span><span class="n">clip1</span><span class="p">,</span><span class="n">clip2</span><span class="p">,</span><span class="n">clip3</span><span class="p">])</span>
</pre></div>
</div>
<p>Now <tt class="docutils literal"><span class="pre">myVideo</span></tt> is a clip that plays the clips 1, 2, and 3 one after the other. You can also play a transition clip between the clips with the option <tt class="docutils literal"><span class="pre">transition=myClip</span></tt>.</p>
<p>Next, you have the composite videoclip:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">video</span> <span class="o">=</span> <span class="n">CompositeVideoClip</span><span class="p">(</span><span class="n">clip</span><span class="o">.</span><span class="n">res</span><span class="p">,</span> <span class="p">[</span><span class="n">clip1</span><span class="p">,</span><span class="n">clip2</span><span class="p">,</span><span class="n">clip3</span><span class="p">])</span>
</pre></div>
</div>
<p>Now <tt class="docutils literal"><span class="pre">myVideo</span></tt> is a clip that has the size of <tt class="docutils literal"><span class="pre">clip1</span></tt>, and plays <tt class="docutils literal"><span class="pre">clip1</span></tt>, and <tt class="docutils literal"><span class="pre">clip2</span></tt> <em>on top of</em> <tt class="docutils literal"><span class="pre">clip1</span></tt>, and <tt class="docutils literal"><span class="pre">clip3</span></tt> on top of
<tt class="docutils literal"><span class="pre">clip1</span></tt>, and <tt class="docutils literal"><span class="pre">clip2</span></tt>. Of course, if <tt class="docutils literal"><span class="pre">clip2</span></tt> and <tt class="docutils literal"><span class="pre">clip3</span></tt> have the same size as <tt class="docutils literal"><span class="pre">clip1</span></tt>, then only <tt class="docutils literal"><span class="pre">clip3</span></tt>, which is on top, will be
visible in the video... unless  <tt class="docutils literal"><span class="pre">clip3</span></tt> and <tt class="docutils literal"><span class="pre">clip2</span></tt> have masks which hide parts of them.</p>
<p>You can set the starting time of each clip as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">video</span> <span class="o">=</span> <span class="n">CompositeVideoClip</span><span class="p">(</span><span class="n">clip</span><span class="o">.</span><span class="n">res</span><span class="p">,</span> <span class="p">[</span><span class="n">clip1</span><span class="p">,</span><span class="n">clip2</span><span class="p">,</span><span class="n">clip3</span><span class="p">])</span>
</pre></div>
</div>
<p>Because the three clips overlap, we can make them appear with a fading-in effect. Here we go for fadein effects that last 1.5 seconds:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">video</span> <span class="o">=</span> <span class="n">CompositeVideoClip</span><span class="p">(</span><span class="n">clip</span><span class="o">.</span><span class="n">res</span><span class="p">,</span> <span class="p">[</span><span class="n">clip1</span><span class="p">,</span> <span class="c"># starts at t=0</span>
                                      <span class="n">clip2</span><span class="o">.</span><span class="n">set_start</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">fadein</span><span class="p">(</span><span class="mf">1.5</span><span class="p">),</span>
                                      <span class="n">clip3</span><span class="o">.</span><span class="n">set_start</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span><span class="o">.</span><span class="n">fadein</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)])</span>
</pre></div>
</div>
<p>Finally, if <tt class="docutils literal"><span class="pre">clip2</span></tt> and <tt class="docutils literal"><span class="pre">clip3</span></tt> are smaller than <tt class="docutils literal"><span class="pre">clip1</span></tt>, you can decide where they will appear:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">video</span> <span class="o">=</span> <span class="n">CompositeVideoClip</span><span class="p">(</span><span class="n">clip</span><span class="o">.</span><span class="n">res</span><span class="p">,</span>
                          <span class="p">[</span><span class="n">clip1</span><span class="p">,</span>
                           <span class="n">clip2</span><span class="o">.</span><span class="n">set_pos</span><span class="p">((</span><span class="mi">45</span><span class="p">,</span><span class="mi">150</span><span class="p">)),</span>
                           <span class="n">clip3</span><span class="o">.</span><span class="n">set_pos</span><span class="p">((</span><span class="mi">90</span><span class="p">,</span><span class="mi">100</span><span class="p">))])</span>
</pre></div>
</div>
<p>Note that there are many ways to specify the position:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">clip2</span><span class="o">.</span><span class="n">set_pos</span><span class="p">((</span><span class="mi">45</span><span class="p">,</span><span class="mi">150</span><span class="p">))</span> <span class="c"># x=45, y=150</span>

<span class="c"># clip2 is horizontally centered, and at the top of the picture</span>
<span class="n">clip2</span><span class="o">.</span><span class="n">set_pos</span><span class="p">((</span><span class="s">&quot;center&quot;</span><span class="p">,</span><span class="s">&quot;top&quot;</span><span class="p">))</span>

<span class="c"># clip2 is at 40% of the width, 70% of the height:</span>
<span class="n">clip2</span><span class="o">.</span><span class="n">set_pos</span><span class="p">((</span><span class="mf">0.4</span><span class="p">,</span><span class="mf">0.7</span><span class="p">),</span> <span class="n">relative</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># clip2&#39;s position is horizontally centered, and moving up !</span>
<span class="n">clip2</span><span class="o">.</span><span class="n">set_pos</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="o">+</span><span class="n">t</span><span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
<p>Be careful when indicating the position that the <tt class="docutils literal"><span class="pre">y</span></tt> position has its
zero at the top of the picture:</p>
<div class="figure">
<img alt="../_images/videoWH.jpeg" src="../_images/videoWH.jpeg" />
</div>
</div>
<div class="section" id="rendering-a-clip">
<h2>Rendering a clip<a class="headerlink" href="#rendering-a-clip" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">duration</span></tt> attribute must be set (with <tt class="docutils literal"><span class="pre">clip.set_duration</span></tt>) to be able to preview or write the movie to a file (some clips, like clips displaying a picture, have <em>a priori</em> an infinite duration).</p>
<p>To display one frame of the clip, you type one of these:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">myClip</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c"># shows the first frame of the clip</span>
<span class="n">myClip</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mf">10.5</span><span class="p">)</span> <span class="c"># shows the frame of the clip at t=10.5s</span>
<span class="n">myClip</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mf">10.5</span><span class="p">,</span><span class="n">frontend</span><span class="o">=</span><span class="s">&quot;matplotlib&quot;</span><span class="p">)</span> <span class="c"># show in a matplotlib window</span>
</pre></div>
</div>
<p>To preview the clip, you type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">myClip</span><span class="o">.</span><span class="n">preview</span><span class="p">()</span> <span class="c"># preview with default fps=15</span>
<span class="n">myClip</span><span class="o">.</span><span class="n">preview</span><span class="p">(</span><span class="n">fps</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">myClip</span><span class="o">.</span><span class="n">preview</span><span class="p">(</span><span class="n">fps</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">sound</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="c"># Play the clip with no sound.</span>
</pre></div>
</div>
<p>It is important to note that the <tt class="docutils literal"><span class="pre">fps</span></tt> can be any number, independently of the <tt class="docutils literal"><span class="pre">fps</span></tt> of your different sources.</p>
<p>To write a clip as a video file, use</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">myClip</span><span class="o">.</span><span class="n">to_movie</span><span class="p">(</span><span class="s">&quot;myEditedMovie.ogv&quot;</span><span class="p">)</span> <span class="c"># default = 15 fps, 3000 kb/s</span>
<span class="n">myClip</span><span class="o">.</span><span class="n">to_movie</span><span class="p">(</span><span class="s">&quot;myEditedMovie.mp4&quot;</span><span class="p">,</span><span class="n">fps</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span><span class="n">bitrate</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span> <span class="c"># 5000kb/s</span>
<span class="n">myClip</span><span class="o">.</span><span class="n">to_movie</span><span class="p">(</span><span class="s">&quot;myEditedMovie.mp4&quot;</span><span class="p">,</span><span class="n">sound</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="c"># don&#39;t render the sound.</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Video clips : an overview</a><ul>
<li><a class="reference internal" href="#classes-of-video-clips">Classes of video clips</a></li>
<li><a class="reference internal" href="#modifying-a-clip">Modifying a clip</a></li>
<li><a class="reference internal" href="#composite-video-clips">Composite video clips</a></li>
<li><a class="reference internal" href="#rendering-a-clip">Rendering a clip</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../first_steps.html">First steps with MoviePy</a><ul>
      <li>Previous: <a href="example_code.html" title="previous chapter">Example code</a></li>
      <li>Next: <a href="sound_overview.html" title="next chapter">Sound clips</a></li>
  </ul></li>
  </ul></li>
</ul>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/first_steps/video_overview.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright 2013, Zulko.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  
  </body>
</html>